# Lambda deployment requirements for document ingestion pipeline
# 
# This file is used for packaging the Lambda function.
# It includes only the dependencies needed for the Lambda runtime.
#
# To build Lambda package:
#   pip install -r requirements.txt -t ./package
#   zip -r lambda-package.zip package/

# Force NumPy 1.x FIRST to prevent compilation errors
numpy<2.0.0

# Pin SciPy to a Lambda-compatible wheel.
# AWS Lambda Python base image (Amazon Linux 2) ships glibc 2.26, so newer SciPy wheels
# tagged manylinux_2_27+ are not compatible and will force a source build (which fails
# due to the old GCC in AL2). SciPy 1.11.4 provides manylinux2014 (glibc 2.17) wheels.
scipy==1.11.4

# AWS SDK (already in Lambda runtime, but pinning for consistency)
boto3>=1.40.1

# Document processing libraries
docling>=1.0.0  # Core Docling library for PDF, DOCX, PPTX, TXT, MD, RTF processing
docling-core[chunking-openai]  # Chunking with OpenAI tokenizer
tiktoken>=0.5.0  # Text chunking and tokenization
striprtf>=0.0.29  # RTF to text conversion
